# Mastering Utility

[![CMake Multi-Platform Build](https://github.com/DanielLMcGuire/Mastering_Utility/actions/workflows/cmake-multi-platform.yml/badge.svg?branch=master&event=push)](https://github.com/DanielLMcGuire/Mastering_Utility/actions/workflows/cmake-multi-platform.yml)

C++ 20 library for audio tagging using a metadata markup format and a Wizard to aid in creating the format.
Includes a C++ tagging API (GPL 3.0) and an Console handling library (MIT).

> [!IMPORTANT]
> API docs are still in progress.

## Features

- Manage multiple albums and tracks via a single Markup config file
- Batch re-encode audio files (WAV, FLAC, MP3, etc.) with consistent quality
- Auto-apply metadata tags (title, artist, album, track number, year, genre, copyright)
- Keep a structured workflow for mastering projects

## Download

- **Windows**: 64-bit installers (MSI/EXE) on the [Releases page](https://github.com/DanielLMcGuire/Mastering_Utility/releases/latest)
- **macOS / Linux**: Artifacts from the latest [GitHub Actions build](https://github.com/DanielLMcGuire/Mastering_Utility/actions/workflows/cmake-multi-platform.yml?query=event%3Apush+branch%3Amaster+is%3Asuccess)
- **Build from source**: See below

## Prerequisites

- **ffmpeg** in your system PATH (`ffmpeg -version`) – [Download here](https://ffmpeg.org/download.html)  
- For building: CMake 3.10+, C++17 compiler, 64-bit system recommended

## Installation

### Pre-built binaries

Grab the installer for your platform from the [Releases page](https://github.com/DanielLMcGuire/Mastering_Utility/releases).

### Build from source

```bash
git clone --depth=1 https://github.com/DanielLMcGuire/Mastering_Utility.git
cd Mastering_Utility

cmake -S . -B build
# Optional: use Ninja for faster build
# cmake -S . -B build -G Ninja

cmake --build build
````

## Usage

### 1. Mastering Wizard (`masteringwizard`)

Interactive Markup creator.

```bash
# Create new configuration
./masteringwizard --Markupfile="output.Markup"

# Show help
./masteringwizard --help
```

Prompts for:

- Album metadata (title, artist, genre, year, copyright, art)
- Output directory
- Songs (source file, title, artist, track number, output file)
- Audio codec settings

**Tip:** Type `exit` or `quit` anytime to leave the wizard.

### 2. Mastering Utility (`masteringutility`)

Processes the Markup file and encodes all tracks.

```bash
./masteringutility --markupfile="myalbum.mas"
```

It will:

- Read album/song metadata
- Create output directories
- Re-encode tracks via ffmpeg
- Apply all metadata tags
- Retry failed conversions up to 3 times

## Markup File Format

```cpp
album 1 ("Album Title", "Artist Name", "© 2025 Copyright", "cover.jpg", "./source", "./output", "Genre", "2025", "Comment")
{
    song 1 ("Track Title", "Artist Name", 1, "input.wav", "01-track.mp3", "libmp3lame", "Genre", "2025", "Comment")
    song 2 ("Another Track", "Artist Name", 2, "input2.flac", "02-track.flac", "flac", "Genre", "2025")
}
```

**Album syntax:**

```ini
album <ID> ("Title", "Artist", "Copyright", "AlbumArtPath", "SourcePath", "OutputPath", "Genre", "Year", "Comment")
```

**Song syntax:**

```ini
song <ID> ("Title", "Artist", TrackNumber, "SourceFile", "OutputFile", "Codec", "Genre", "Year", "Comment")
```

**Supported codecs:** Any ffmpeg audio codec:

- `mp3` – MP3 (VBR quality 3 default)
- `flac` – FLAC lossless (compression 12 default)
- `aac` – AAC
- `libopus` – Opus
- `copy` – Copy stream without re-encoding

Run ```ffmpeg --codecs``` to see more

## Example Workflow

```bash
./masteringwizard -f="myproject.mas"
./masteringutility -f="myproject.mas"
```

Wizard will prompt for album/song info and generate a ready-to-use Markup file.

## AI Content Disclosure

- 90%+ of code written manually
- GitHub Actions/workflows partially AI-generated (checked)
- Issue responses manually written
- `(autogenerated)` tag marks AI-generated issues

## License

GPL 3.0
See [LICENSE](LICENSE) for details.

## Contributing

Issues and PRs welcome.

## Support

Use the [GitHub Issues page](https://github.com/DanielLMcGuire/Mastering_Utility/issues) for questions or feature requests.
